<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <title>Erik Martus | Rainfall</title>

  <script src="phaser.min.js"></script>

  <link rel="stylesheet" href="css/main.css">
</head>

<body>
  <main>
    <div id="phaser-canvas"></div>
  </main>

  <script type="text/javascript">
    window.onload = function () {
      var game = new Phaser.Game(720, 960, Phaser.AUTO, 'phaser-canvas', {
        preload: preload,
        create: create
      });

      function preload() {
        // load bkgr imgs
        game.load.image('background_dark', 'img/background/background_dark.png');
        game.load.image('background_gray', 'img/background/background_gray.png');
        game.load.image('background_light', 'img/background/background_light.png');
        game.load.image('background_overlay', 'img/background/background_overlay.png');

        // load button assets
        game.load.spritesheet('back_btn', 'img/button/back_button.png', 130, 64);
        game.load.spritesheet('help_btn', 'img/button/help_button.png', 312, 152);
        game.load.spritesheet('menu_btn', 'img/button/menu_button.png', 356, 152);
        game.load.spritesheet('play_btn', 'img/button/play_button.png', 356, 170);
        game.load.spritesheet('play-again_btn', 'img/button/play-again_button.png', 654, 170);

        // load help assets
        game.load.image('controls', 'img/help/controls.png');
        game.load.image('how-to-play', 'img/help/how-to-play.png');
        game.load.image('instructions_powerups', 'img/help/instructions_powerups.png');
        game.load.image('instructions', 'img/help/instructions.png');
        game.load.image('scoring', 'img/help/controls.png');

        // load icon imgs
        game.load.spritesheet('icon_heat-wave', 'img/icon/icon_heat-wave.png', 56, 56);
        game.load.spritesheet('icon_umbrella', 'img/icon/icon_umbrella.png', 56, 56);
        game.load.image('p-u_heat-wave', 'img/icon/power-up_heat-wave.png');
        game.load.image('p-u_umbrella', 'img/icon/power-up_umbrella.png');
        game.load.image('raindrop', 'img/icon/rain-drop.png');
        game.load.image('heart_full', 'img/icon/heart_filled.png');
        game.load.image('heart_empty', 'img/icon/heart_empty.png');

        // load player assets
        game.load.image('pl_dead', 'img/player/player_broken.png');
        game.load.image('pl_dark', 'img/player/player_dark.png');
        game.load.image('player', 'img/player/player.png');

        // load scenery imgs
        game.load.image('cloud01', 'img/scenery/cloud_01.png');
        game.load.image('cloud02', 'img/scenery/cloud_02.png');
        game.load.image('cloud_dark01', 'img/scenery/cloud_dark_01.png');
        game.load.image('cloud_dark02', 'img/scenery/cloud_dark_02.png');
        game.load.image('ground_game', 'img/scenery/ground_game.png');
        game.load.image('ground_menu', 'img/scenery/ground_menu.png');
        game.load.image('sun', 'img/scenery/sun.png');

        // load other imgs
        game.load.image('title', 'img/rainfall_title.png');
      } // end function preload

      function create() {
        // Add bkgr img to stage
        var spBackground = game.add.sprite(0, 0, 'background_dark');
        // ---- End bkgr img ----

        // Add scenery to stage
        var spCloud_dark01 = game.add.sprite(29, 105, 'cloud_dark01');
        var spCloud_dark02 = game.add.sprite(360, 105, 'cloud_dark02');
        var spGround = game.add.sprite(0, 900, 'ground_game');
        // ---- End scenery ----

        var spPlayer = game.add.sprite(game.world.centerX, 870, 'pl_dead');
        spPlayer.anchor.setTo(0.5, 0);

        // Add game elements
        var spHeat_wave = game.add.sprite(546, 850, 'p-u_heat-wave');
        var spRaindrop01 = game.add.sprite(72, 455, 'raindrop');
        var spRaindrop02 = game.add.sprite(111, 353, 'raindrop');
        var spRaindrop03 = game.add.sprite(132, 620, 'raindrop');
        var spRaindrop04 = game.add.sprite(170, 273, 'raindrop');
        var spRaindrop05 = game.add.sprite(225, 321, 'raindrop');
        var spRaindrop06 = game.add.sprite(267, 486, 'raindrop');
        var spRaindrop07 = game.add.sprite(355, 385, 'raindrop');
        var spRaindrop08 = game.add.sprite(427, 289, 'raindrop');
        var spRaindrop09 = game.add.sprite(459, 494, 'raindrop');
        var spRaindrop10 = game.add.sprite(560, 320, 'raindrop');
        var spRaindrop11 = game.add.sprite(557, 567, 'raindrop');
        var spRaindrop12 = game.add.sprite(623, 435, 'raindrop');

        // Add text
        var showers = "Rain Shower: 02";
        var score = "Score: 100";
        var time = "1:15";

        var generalStyle = {
          fontSize: "80px",
          fill: "#ffffff",
          height: "80px",
          font: "35px Arial",
          fill: "black",
          alignment: "left"
        };

        // Add game bar items
        var heart01 = game.add.sprite(30, 909, 'heart_empty');
        var heart02 = game.add.sprite(88, 909, 'heart_empty');
        var heart03 = game.add.sprite(146, 909, 'heart_empty');
        var txShower = game.add.text(370, 909, showers);

        // Add header text
        var txScore = game.add.text(20, 14, score, generalStyle);
        var txTime = game.add.text(526, 14, time, generalStyle);

        // Add overlay
        var overlay_bkgr = game.add.sprite(0, 0, 'background_overlay');

        // Add buttons
        var btPlay_again = game.add.button(game.world.centerX, 550, 'play-again_btn', actionOnClick, this, 1, 0, 2);
        btPlay_again.anchor.setTo(0.5, 0);

        var btMenu = game.add.button(game.world.centerX, 730, 'menu_btn', actionOnClick, this, 1, 0, 2);
        btMenu.anchor.setTo(0.5, 0);

        // text
        var game_over = "GAME OVER";
        var final_score = "FINAL SCORE"
        var final_points = "100 POINTS";
        var generalStyle = {
          fontSize: "80px",
          fill: "#ffffff",
          height: "80px",
          font: "35px Arial",
          alignment: "left"
        };

        // create text
        var txFinal_score = game.add.text(game.world.centerX, 312, final_score, generalStyle);
        txFinal_score.anchor.setTo(0.5, 0);
        var txFinal_points = game.add.text(game.world.centerX, 400, final_points, generalStyle);
        txFinal_points.anchor.setTo(0.5, 0);

      } // end function create

      function actionOnClick() {
        alert('Button clicked');
      }
    } // end window.onload
  </script>

  <footer>
    <p>
      <a class="foot_link" href="index.html">Title Screen</a>
      <a class="foot_link" href="help.html">Help Screen</a>
      <a class="foot_link" href="game.html">Game Screen</a>
      <a class="foot_link" href="win.html">Win Screen</a>
      <a class="foot_link" href="lose.html">Lose Screen</a>
    </p>
  </footer>
</body>

</html>